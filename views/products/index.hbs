{{#extends 'base'}}
{{#block 'content'}}

<div class="container my-4">
    <div class="accordion" id="productSearchAccordion">
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse"
                    aria-expanded="true" aria-controls="collapse">
                    Product Search
                </button>
            </h2>
            <div id="collapse" class="accordion-collapse collapse" aria-labelledby="heading"
                data-bs-parent="#productSearchAccordion">
                <div class="accordion-body">
                    <form method="GET">
                        {{{form}}}
                        <a href="/products" class="btn btn-outline-secondary me-2">Reset</a>
                        <input type="submit" class="btn btn-outline-primary" value="Search">
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="d-flex justify-content-between align-items-center">
        <h3>All Products</h3>
        <a href="/products/create" class="btn btn-dark btn-outline-light btn-sm">Add</a>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Cost</th>
                <th>Description</th>
                <th>Serving Size</th>
                <th>Brand</th>
                <th>Category</th>
                <th>Allergens</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {{#each products}}
            <tr>
                <td>{{this.product_id}}</td>
                <td>{{this.product_name}}</td>
                <td>{{this.cost}}</td>
                <td>{{this.description}}</td>
                <td>{{this.serving_size}}</td>
                <td>{{this.brand.brand_name}}</td>
                <td>{{this.category.category_name}}</td>
                <td>
                    {{#each this.allergens}}
                    <span class="badge bg-primary">{{this.allergen_name}}</span>
                    {{/each}}
                </td>
                <td>
                    <a href="/products/{{this.product_id}}/variants" class="btn btn-primary btn-sm">Variants</a>
                    <a href="/products/{{this.product_id}}/update" class="btn btn-primary btn-sm">Update</a>
                    <a href="/products/{{this.product_id}}/delete" class="btn btn-danger btn-sm">Delete</a>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>


{{/block}}
{{/extends}}